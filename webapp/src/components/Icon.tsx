import { unreachable } from "../lib/devex";

export type IconName = "arrow-left" | "bin" | "gear" | "pencil" | "rotate" | "hidden";
export type IconSize = "small" | "large" | "extralarge";
type SvgViewBox = string; // coordinates as they look in the SVG "viewBox" attribute, e.g.: `0 0 120 140`

interface Props {
  icon: IconName;
  size?: IconSize;
}

const DEFAULT_ICON_SIZE: IconSize = "small";
const INHERIT_COLOR_FROM_PARENT = { fill: "currentColor" };

function getSvgContent({
  icon,
}: {
  icon: IconName;
}): [SvgViewBox, JSX.Element | JSX.Element[]] {
  switch (icon) {
    case "arrow-left":
      return [
        "0 0 512 512",
        <path
          {...INHERIT_COLOR_FROM_PARENT}
          d="M 475,219.46 H 125 L 245,99 A 36.7,36.7 0 0 0 193.33,47.33 L 10.6,230 a 37.1,37.1 0 0 0 0,52 L 193.3,464.7 a 36.7,36.7 0 0 0 51.9,-51.9 L 125,292 h 350.47 c 20.1,0 36.55,-16.45 36.55,-36.55 0,-20.1 -16.8,-36.55 -36.9,-36.55 z"
        />,
      ];
    case "bin":
      return [
        "0 0 16 16",
        [
          <path
            key="bin-1"
            {...INHERIT_COLOR_FROM_PARENT}
            d={
              "M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1z" +
              "M4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.8824zM2.53h11V2h-11z"
            }
          />,
          <path
            key="bin-2"
            {...INHERIT_COLOR_FROM_PARENT}
            d={
              "M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5" +
              "m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5" +
              "m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"
            }
          />,
        ],
      ];
    case "pencil":
      return [
        "0 0 16 16",
        <path
          {...INHERIT_COLOR_FROM_PARENT}
          d="M3.25 10.26l2.47 2.47 6.69-6.69-2.46-2.48-6.7 6.7zM.99 14.99l3.86-1.39-2.46-2.44-1.4 3.83zm12.25-14c-.48 0-.92.2-1.24.51l-1.44 1.44 2.47 2.47 1.44-1.44c.32-.32.51-.75.51-1.24.01-.95-.77-1.74-1.74-1.74z"
        />,
      ];
    case "gear":
      return [
        "0 0 512 512",
        <path
          {...INHERIT_COLOR_FROM_PARENT}
          d="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"
        />,
      ];
    case "hidden":
      return [
        "0 0 512 512",
        <path
          {...INHERIT_COLOR_FROM_PARENT}
          d="m 83.137152,447.79502 c -8.600805,-2.81017 -13.412171,-11.50273 -10.986068,-19.84822 1.190362,-4.0947 0.409542,-3.24165 31.496696,-34.41046 16.08589,-16.12815 29.11451,-29.53845 28.95247,-29.80063 -0.16204,-0.26218 -3.04311,-1.91481 -6.40239,-3.67248 C 87.526445,339.82919 40.560441,305.83914 8.0146439,274.53215 0.23369091,267.04736 -1.7741446,260.51915 1.5234804,253.42697 6.9564418,241.74236 66.198157,194.85478 103.7424,172.52457 c 90.75066,-53.97585 163.91318,-63.82679 245.15808,-33.00921 2.91472,1.1056 5.61106,2.01064 5.99189,2.01121 0.38083,4.6e-4 15.8198,-15.12741 34.30883,-33.61773 38.1894,-38.192075 35.80414,-36.189849 43.118,-36.193834 12.67896,-0.0069 20.4371,14.025897 13.59559,24.591479 -2.77052,4.278595 -349.230286,349.655325 -351.849689,350.749795 -3.11177,1.3002 -8.164193,1.64175 -10.927949,0.73874 z m 91.961798,-125.79005 17.19329,-17.21585 -1.58643,-2.48433 C 145.91714,232.1662 230.63015,146.65218 301.62346,190.33833 l 3.18314,1.95877 12.36965,-12.36329 c 14.57476,-14.56725 13.69735,-12.49294 6.26374,-14.80829 -85.73683,-26.70466 -172.0018,0.70101 -274.189972,87.10786 -10.3595,8.75965 -10.3595,6.69204 0,15.45167 27.723265,23.44186 53.855772,41.90656 81.680962,57.71415 8.17039,4.64163 25.73452,13.79361 26.50561,13.81103 0.258,0.006 8.20606,-7.73653 17.66236,-17.20526 z m 74.26366,75.70461 c -15.26838,-0.75733 -35.68942,-4.08849 -49.71536,-8.10975 l -2.48095,-0.7113 13.31031,-13.34588 13.3103,-13.34588 2.07371,0.22258 c 1.14053,0.12242 4.97689,0.64731 8.52523,1.16642 67.9997,9.94814 150.12854,-23.20717 235.1352,-94.92381 11.69791,-9.86903 11.54182,-7.64403 1.15206,-16.42517 -26.07416,-22.03713 -50.54357,-39.51625 -77.78054,-55.56064 l -2.21084,-1.30234 11.92025,-11.92683 11.92022,-11.92683 1.63569,0.98498 c 23.55398,14.18352 47.77001,31.54263 71.22007,51.05363 40.69854,33.86214 41.23738,36.38662 13.12292,61.47886 -79.69287,71.12604 -174.77743,115.53366 -242.1522,113.09302 -1.01382,-0.0368 -5.05755,-0.22621 -8.98607,-0.42106 z m 0.47791,-57.1541 c -1.63805,-0.2506 -3.08081,-0.55817 -3.20614,-0.6835 -0.25149,-0.25149 92.62824,-93.27665 93.13082,-93.27665 1.33171,0 1.48643,20.52647 0.20668,27.41899 -7.89109,42.49984 -48.98254,72.83637 -90.13136,66.54116 z"
        />,
      ];
    case "rotate":
      return [
        "0 0 512 512",
        <path
          {...INHERIT_COLOR_FROM_PARENT}
          d="M142.9 142.9c-17.5 17.5-30.1 38-37.8 59.8c-5.9 16.7-24.2 25.4-40.8 19.5s-25.4-24.2-19.5-40.8C55.6 150.7 73.2 122 97.6 97.6c87.2-87.2 228.3-87.5 315.8-1L455 55c6.9-6.9 17.2-8.9 26.2-5.2s14.8 12.5 14.8 22.2l0 128c0 13.3-10.7 24-24 24l-8.4 0c0 0 0 0 0 0L344 224c-9.7 0-18.5-5.8-22.2-14.8s-1.7-19.3 5.2-26.2l41.1-41.1c-62.6-61.5-163.1-61.2-225.3 1zM16 312c0-13.3 10.7-24 24-24l7.6 0 .7 0L168 288c9.7 0 18.5 5.8 22.2 14.8s1.7 19.3-5.2 26.2l-41.1 41.1c62.6 61.5 163.1 61.2 225.3-1c17.5-17.5 30.1-38 37.8-59.8c5.9-16.7 24.2-25.4 40.8-19.5s25.4 24.2 19.5 40.8c-10.8 30.6-28.4 59.3-52.9 83.8c-87.2 87.2-228.3 87.5-315.8 1L57 457c-6.9 6.9-17.2 8.9-26.2 5.2S16 449.7 16 440l0-119.6 0-.7 0-7.6z"
        />,
      ];

    default:
      throw unreachable(`unsupported icon '${icon}'`);
  }
}

function getDimensions({ size }: { size: IconSize }): { width: string; height: string } {
  switch (size) {
    case "small":
      return { width: "0.9rem", height: "0.9rem" };
    case "large":
      return { width: "1.2rem", height: "1.2rem" };
    case "extralarge":
      return { width: "1.5rem", height: "1.5rem" };
    default:
      throw unreachable(`unsupported size '${size}'`);
  }
}

export function Icon({ icon, size }: Props) {
  const { width, height } = getDimensions({ size: size || DEFAULT_ICON_SIZE });
  const [viewBox, content] = getSvgContent({ icon });
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      className="fill-current"
      aria-hidden="true"
      focusable="false"
      viewBox={viewBox}
      width={width}
      height={height}
      role="icon"
    >
      {content}
    </svg>
  );
}
